<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cbmimage: Function to validate a disk</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cbmimage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__cbmimage__validate.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Function to validate a disk</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4f445839328d1f6655fab479dfdc496a" id="r_ga4f445839328d1f6655fab479dfdc496a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4f445839328d1f6655fab479dfdc496a">cbmimage_i_d1m_d2m_d4m_set_bam</a> (<a class="el" href="group__cbmimage__image.html#ga85510e889b0e546a0bc47dbed50eb4e4">cbmimage_image_settings</a> *settings)</td></tr>
<tr class="memdesc:ga4f445839328d1f6655fab479dfdc496a"><td class="mdescLeft">&#160;</td><td class="mdescRight">occupy the blocks for the partition table of a CMD disk  <br /></td></tr>
<tr class="separator:ga4f445839328d1f6655fab479dfdc496a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab214995f8940dfe26c977d4108a8a1c5" id="r_gab214995f8940dfe26c977d4108a8a1c5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab214995f8940dfe26c977d4108a8a1c5">cbmimage_i_mark_global_and_local</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image, <a class="el" href="group__cbmimage__loop.html#ga11f68bc9e99aeff8d9ca1d0d63e9dab1">cbmimage_loop</a> *loop_detector, <a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a> block_start, <a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a> block_current, <a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a> block_target)</td></tr>
<tr class="separator:gab214995f8940dfe26c977d4108a8a1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9c8fcc979f890cc40ed12ff5623ef54" id="r_gae9c8fcc979f890cc40ed12ff5623ef54"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae9c8fcc979f890cc40ed12ff5623ef54">cbmimage_i_validate_follow_chain</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image, <a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a> block_start, size_t *count_blocks)</td></tr>
<tr class="separator:gae9c8fcc979f890cc40ed12ff5623ef54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ddefb56f69524f939b8b18cd3eb90a6" id="r_ga7ddefb56f69524f939b8b18cd3eb90a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7ddefb56f69524f939b8b18cd3eb90a6">cbmimage_i_validate_1581_partition</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image, <a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a> block_start, int count)</td></tr>
<tr class="separator:ga7ddefb56f69524f939b8b18cd3eb90a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a2f0a6d1994f73fb4b5765af74b307d" id="r_ga4a2f0a6d1994f73fb4b5765af74b307d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4a2f0a6d1994f73fb4b5765af74b307d">cbmimage_i_bam_check_equality</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image)</td></tr>
<tr class="separator:ga4a2f0a6d1994f73fb4b5765af74b307d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66ab9cf6f1bce403a8f9baca1fd8b1a9" id="r_ga66ab9cf6f1bce403a8f9baca1fd8b1a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga66ab9cf6f1bce403a8f9baca1fd8b1a9">cbmimage_i_validate_super_sidesector_plausibility</a> (<a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *chain)</td></tr>
<tr class="separator:ga66ab9cf6f1bce403a8f9baca1fd8b1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38703975f2efacf1649181d442ad5ad1" id="r_ga38703975f2efacf1649181d442ad5ad1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga38703975f2efacf1649181d442ad5ad1">cbmimage_i_validate_super_sidesector_end</a> (<a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *chain, uint8_t offset)</td></tr>
<tr class="separator:ga38703975f2efacf1649181d442ad5ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae226898e567931c36373f3a035802c22" id="r_gae226898e567931c36373f3a035802c22"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae226898e567931c36373f3a035802c22">cbmimage_i_validate_sidesector_plausibility</a> (<a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *chain_sidesector, uint8_t *first_sidesector, uint8_t count_sidesector, int recordlength)</td></tr>
<tr class="separator:gae226898e567931c36373f3a035802c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7467189dc036e689d06474ffac01eb5b" id="r_ga7467189dc036e689d06474ffac01eb5b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7467189dc036e689d06474ffac01eb5b">cbmimage_i_validate_sidesector_chain</a> (<a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *chain_sidesector, <a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *chain_file)</td></tr>
<tr class="separator:ga7467189dc036e689d06474ffac01eb5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31d429bbcd721c20335e677a2154144a" id="r_ga31d429bbcd721c20335e677a2154144a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga31d429bbcd721c20335e677a2154144a">cbmimage_i_validate_rel_file</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image, <a class="el" href="group__cbmimage__dir.html#gafe075dfbd76ba038ddda13d5c79036a8">cbmimage_dir_entry</a> *dir_entry, size_t *count_blocks)</td></tr>
<tr class="separator:ga31d429bbcd721c20335e677a2154144a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4aed0425c401da26fb56031adcc4bb85" id="r_ga4aed0425c401da26fb56031adcc4bb85"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4aed0425c401da26fb56031adcc4bb85">cbmimage_i_validate_geos_file</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image, <a class="el" href="group__cbmimage__dir.html#gafe075dfbd76ba038ddda13d5c79036a8">cbmimage_dir_entry</a> *dir_entry, size_t *count_blocks)</td></tr>
<tr class="separator:ga4aed0425c401da26fb56031adcc4bb85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4bd2f66e20a3f7cbbedb09c0bc14505" id="r_gae4bd2f66e20a3f7cbbedb09c0bc14505"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae4bd2f66e20a3f7cbbedb09c0bc14505">cbmimage_i_validate_process_file</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image, <a class="el" href="group__cbmimage__dir.html#gafe075dfbd76ba038ddda13d5c79036a8">cbmimage_dir_entry</a> *dir_entry)</td></tr>
<tr class="memdesc:gae4bd2f66e20a3f7cbbedb09c0bc14505"><td class="mdescLeft">&#160;</td><td class="mdescRight">validate a specific file  <br /></td></tr>
<tr class="separator:gae4bd2f66e20a3f7cbbedb09c0bc14505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6949ad6289b59935df3c83c4d444b0cf" id="r_ga6949ad6289b59935df3c83c4d444b0cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6949ad6289b59935df3c83c4d444b0cf">cbmimage_validate</a> (<a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *image)</td></tr>
<tr class="memdesc:ga6949ad6289b59935df3c83c4d444b0cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">validate the disk (and the bam)  <br /></td></tr>
<tr class="separator:ga6949ad6289b59935df3c83c4d444b0cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4a2f0a6d1994f73fb4b5765af74b307d" name="ga4a2f0a6d1994f73fb4b5765af74b307d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a2f0a6d1994f73fb4b5765af74b307d">&#9670;&#160;</a></span>cbmimage_i_bam_check_equality()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_bam_check_equality </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>check if the loop detector and the BAM are identical</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the BAM and the loop detector are identical</li>
<li>!= 0 if not</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>this function goes through all blocks and tests if the BAM is free and not marked in the loop detector, or not free and marked in the loop detector. If there is an unequality, it reports an error. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga4f445839328d1f6655fab479dfdc496a" name="ga4f445839328d1f6655fab479dfdc496a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f445839328d1f6655fab479dfdc496a">&#9670;&#160;</a></span>cbmimage_i_d1m_d2m_d4m_set_bam()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_d1m_d2m_d4m_set_bam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga85510e889b0e546a0bc47dbed50eb4e4">cbmimage_image_settings</a> *</td>          <td class="paramname"><span class="paramname"><em>settings</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>occupy the blocks for the partition table of a CMD disk </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">settings</td><td>pointer to the image data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if no error occurred</li>
<li>!= 0 if an error occurred</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>special handling for validating D1M, D2M and D4M partition tables</li>
<li>the blocks of a partition are treated as single file </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gab214995f8940dfe26c977d4108a8a1c5" name="gab214995f8940dfe26c977d4108a8a1c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab214995f8940dfe26c977d4108a8a1c5">&#9670;&#160;</a></span>cbmimage_i_mark_global_and_local()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_mark_global_and_local </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cbmimage__loop.html#ga11f68bc9e99aeff8d9ca1d0d63e9dab1">cbmimage_loop</a> *</td>          <td class="paramname"><span class="paramname"><em>loop_detector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a></td>          <td class="paramname"><span class="paramname"><em>block_start</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a></td>          <td class="paramname"><span class="paramname"><em>block_current</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a></td>          <td class="paramname"><span class="paramname"><em>block_target</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>mark blocks as used</p>
<p>This function marks a block in to loop detectors.</p>
<p>There is a first, global loop detector. It is used to find out if files (or other link chains) "overlap" each other, that is, one link chain and another link chain end in the same blocks. Thus, it is not really a loop, but some chain error that is detected.</p>
<p>The second, local loop detector, is used to find out if a link chain has an intertial loop. This loop detector has to be newly initialized for each link chain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">loop_detector</td><td>pointer to the local loop detector</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_start</td><td>The starting block of this chain. This data is not used internally. It is helpful in the output, telling what went wrong and where a loop was detected.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_current</td><td>The current block of this chain. This block is marked as used.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_target</td><td>The next block/the target of the current block in this chain. This block is set as target for the current block</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if there is no loop or sharing of links.</li>
<li>!= 0 if not </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga7ddefb56f69524f939b8b18cd3eb90a6" name="ga7ddefb56f69524f939b8b18cd3eb90a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ddefb56f69524f939b8b18cd3eb90a6">&#9670;&#160;</a></span>cbmimage_i_validate_1581_partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cbmimage_i_validate_1581_partition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a></td>          <td class="paramname"><span class="paramname"><em>block_start</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check a 1581 partition</p>
<p>A 1581 partition is just a contiguous area of the disk, without any implied structure. <br  />
Thus, this function just marks all the blocks in the partition, nothing more.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_start</td><td>The starting block of this partion. From this block, the chain is followed and all blocks are marked as used.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>The count of blocks that are occupied by this partition</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if everything is ok</li>
<li>!= 0 if not </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gae9c8fcc979f890cc40ed12ff5623ef54" name="gae9c8fcc979f890cc40ed12ff5623ef54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9c8fcc979f890cc40ed12ff5623ef54">&#9670;&#160;</a></span>cbmimage_i_validate_follow_chain()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_follow_chain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__blockaddress.html#ga4beaaf8e2c9f869003821e925a6c8273">cbmimage_blockaddress</a></td>          <td class="paramname"><span class="paramname"><em>block_start</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>count_blocks</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>follow a chain and check if it is consistent</p>
<p>This function follows a link chain. Doing this, it determines if there is a loop, or if this link chain shares blocks with another link chain. If any of this occurrs, this function reports an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_start</td><td>The starting block of this chain. From this block, the chain is followed and all blocks are marked as used.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">count_blocks</td><td>Pointer to a variable. On return, this function will add the number of blocks it followed in the chain. <br  />
 Can be NULL; in this case, nothing will be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if there is no loop or sharing of links.</li>
<li>!= 0 if not </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga4aed0425c401da26fb56031adcc4bb85" name="ga4aed0425c401da26fb56031adcc4bb85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4aed0425c401da26fb56031adcc4bb85">&#9670;&#160;</a></span>cbmimage_i_validate_geos_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_geos_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cbmimage__dir.html#gafe075dfbd76ba038ddda13d5c79036a8">cbmimage_dir_entry</a> *</td>          <td class="paramname"><span class="paramname"><em>dir_entry</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>count_blocks</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>validate the specialities of a GEOS file</p>
<p>This functions checks that the info block and the chains from the VLIR table (if it is a VLIR file) do not share blocks with other files or structures.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dir_entry</td><td>The directory entry of this file</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">count_blocks</td><td>Pointer to a variable. On return, this function will add the number of blocks it followed in the chain. <br  />
 Can be NULL; in this case, nothing will be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if there is no loop or sharing of links.</li>
<li>!= 0 if not </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gae4bd2f66e20a3f7cbbedb09c0bc14505" name="gae4bd2f66e20a3f7cbbedb09c0bc14505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4bd2f66e20a3f7cbbedb09c0bc14505">&#9670;&#160;</a></span>cbmimage_i_validate_process_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cbmimage_i_validate_process_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cbmimage__dir.html#gafe075dfbd76ba038ddda13d5c79036a8">cbmimage_dir_entry</a> *</td>          <td class="paramname"><span class="paramname"><em>dir_entry</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>validate a specific file </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dir_entry</td><td>pointer to the directory entry of the file to validate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the file is consistent</li>
<li>!= 0 if not</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>A file is consistent if the following applies:<ul>
<li>the file chain does not conflict with any other file chain that was processed before this file</li>
</ul>
</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000015">Todo</a></b></dt><dd>implement GEOS support </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000005">Bug</a></b></dt><dd>GEOS is not supported yet!</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000016">Todo</a></b></dt><dd>implement CMD native partition </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000017">Todo</a></b></dt><dd></dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000006">Bug</a></b></dt><dd>CMD native partition not yet implemented </dd></dl>

</div>
</div>
<a id="ga31d429bbcd721c20335e677a2154144a" name="ga31d429bbcd721c20335e677a2154144a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31d429bbcd721c20335e677a2154144a">&#9670;&#160;</a></span>cbmimage_i_validate_rel_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_rel_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cbmimage__dir.html#gafe075dfbd76ba038ddda13d5c79036a8">cbmimage_dir_entry</a> *</td>          <td class="paramname"><span class="paramname"><em>dir_entry</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>count_blocks</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>validate the side sector block of a REL file</p>
<p>This function checks if the link chain of a REL file is represented correctly by the side-sector block(s) of it.</p>
<p>Additionally, it also checks if the side-sector blocks are consistent and do not share blocks with other files or structures.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dir_entry</td><td>The directory entry of this file</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">count_blocks</td><td>Pointer to a variable. On return, this function will add the number of blocks it followed in the chain. <br  />
 Can be NULL; in this case, nothing will be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if there is no loop or sharing of links.</li>
<li>!= 0 if not </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga7467189dc036e689d06474ffac01eb5b" name="ga7467189dc036e689d06474ffac01eb5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7467189dc036e689d06474ffac01eb5b">&#9670;&#160;</a></span>cbmimage_i_validate_sidesector_chain()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_sidesector_chain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *</td>          <td class="paramname"><span class="paramname"><em>chain_sidesector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *</td>          <td class="paramname"><span class="paramname"><em>chain_file</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>validate the side-sector chain</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chain_sidesector</td><td>pointer to a link chain that points to the side-sector</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chain_file</td><td>pointer to a link chain that points to the file contents</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the side-sector chain is correct</li>
<li>!= 0 if not</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function goes through all the links in the side-sector block and checks that it matches the corresponding block in the file chain. </dd></dl>

</div>
</div>
<a id="gae226898e567931c36373f3a035802c22" name="gae226898e567931c36373f3a035802c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae226898e567931c36373f3a035802c22">&#9670;&#160;</a></span>cbmimage_i_validate_sidesector_plausibility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_sidesector_plausibility </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *</td>          <td class="paramname"><span class="paramname"><em>chain_sidesector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>first_sidesector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>count_sidesector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>recordlength</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>check plausibility of a (non-super) side-sector</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chain_sidesector</td><td>pointer to a link chain that points to the side-sector</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">first_sidesector</td><td>pointer to a buffer that contains the data of the first side-sector in this side-sector group</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count_sidesector</td><td>the number of this side-sector</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">recordlength</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the side-sector is plausible</li>
<li>!= 0 if not</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The side-sector is plausible if the following applies:<ul>
<li>the addresses of all side-sectors in this side-sector group are identical to the first side-sector of this group.</li>
<li>the address of this side-sector is at the right place</li>
<li>the recordlength is the same as the record-length in the directory </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga38703975f2efacf1649181d442ad5ad1" name="ga38703975f2efacf1649181d442ad5ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38703975f2efacf1649181d442ad5ad1">&#9670;&#160;</a></span>cbmimage_i_validate_super_sidesector_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_super_sidesector_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *</td>          <td class="paramname"><span class="paramname"><em>chain</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>check if the super side-sector does not contain extra data</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chain</td><td>pointer to a link chain that points to the super side-sector</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>the offset from which to check if the super side-sector is empty</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the super side-sector is empty after the offset</li>
<li>!= 0 if not </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga66ab9cf6f1bce403a8f9baca1fd8b1a9" name="ga66ab9cf6f1bce403a8f9baca1fd8b1a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66ab9cf6f1bce403a8f9baca1fd8b1a9">&#9670;&#160;</a></span>cbmimage_i_validate_super_sidesector_plausibility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cbmimage_i_validate_super_sidesector_plausibility </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__chain.html#ga8db8111a4f8d4b9a9fbe962e181808f6">cbmimage_chain</a> *</td>          <td class="paramname"><span class="paramname"><em>chain</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>check plausibility of a super side-sector</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chain</td><td>pointer to a link chain that points to the super side-sector</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the super side-sector is plausible</li>
<li>!= 0 if not</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The super side-sector is plausible if the following applies:<ul>
<li>the link chain and the first side-sector group are identical</li>
<li>the number of the side-sector block is 0xFE. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga6949ad6289b59935df3c83c4d444b0cf" name="ga6949ad6289b59935df3c83c4d444b0cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6949ad6289b59935df3c83c4d444b0cf">&#9670;&#160;</a></span>cbmimage_validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cbmimage_validate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cbmimage__image.html#ga5169ab6270433dcb80cb916b9f4f18c7">cbmimage_fileimage</a> *</td>          <td class="paramname"><span class="paramname"><em>image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>validate the disk (and the bam) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>pointer to the image data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if the BAM is consistent</li>
<li>!= 0 if not</li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>A BAM is consistent if the following applies:<ul>
<li><a class="el" href="group__cbmimage__bam.html#ga6f123c7d2bb6253bb6409054d6e5571b" title="check the consistency of a BAM">cbmimage_bam_check_consistency()</a> reports success</li>
<li>all reachable blocks from files are marked as used</li>
</ul>
</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000018">Todo</a></b></dt><dd>How should details be given to the caller?</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000019">Todo</a></b></dt><dd>Implement GEOS support </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000007">Bug</a></b></dt><dd>GEOS is not supported yet!</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
